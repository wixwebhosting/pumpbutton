<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Trenches Voice Grid</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="stars"></div>
    <div class="stars-layer"></div>

    <header class="hero">
        <div>
            <p class="eyebrow">THE TRENCHES â€¢ LIVE TRENCH VC</p>
            <h1>Create a trenching VC.<br> Make friends. Connect.</h1>
            <p class="lede">Voice chats for crypto degens. Create a trench VC in one tap and connect with others in the space.</p>
        </div>
        <div class="hero-card">
            <div class="stat">
                <p>Voice Rooms</p>
                <strong id="liveCount">0</strong>
            </div>
            <div class="stat">
                <p>Active Trenchers</p>
                <strong id="popCount">0</strong>
            </div>
            <div class="pulse">Connected</div>
        </div>
    </header>

    <main>
        <section class="panel" id="commandPanel">
            <header>
                <div>
                    <p class="eyebrow">COMMAND DESK</p>
                    <h2>Create your own Trench VC</h2>
                </div>
                <span class="status" id="hostStatus">Idle</span>
            </header>
            <div class="panel-body">
                <label class="field">
                    <span>Enter VC Name</span>
                    <input type="text" id="trenchTopic" maxlength="60" placeholder="" />
                    </label>
                    <div class="controls">
                        <button class="primary" id="createTrench">Create Trench VC</button>
                    </div>
            </div>
        </section>

        <section class="panel" id="activeTrenchesPanel">
            <header>
                <div>
                        <p class="eyebrow">ACTIVE TRENCHES</p>
                        <h2>Drop into live trench VC</h2>
                </div>
                <span class="status" id="roomStatus">Listening</span>
            </header>
            <div class="room-grid" id="roomGrid">
                <p class="empty">No trenches active. Spin one up.</p>
            </div>
        </section>

        <section class="panel" id="voicePanel">
            <header>
                <div>
                    <h2>Current voice chat</h2>
                </div>
                <span class="status" id="callStatus">Disconnected</span>
            </header>
            <div class="panel-body live">
                <div class="participant-roster">
                    <p class="label">Party Roster</p>
                    <div id="participantList" class="roster-list">
                        <p class="empty">No active trench VC.</p>
                    </div>
                </div>
                    <div class="call-actions">
                        <button class="danger" id="leaveRoom" disabled>Leave Trench</button>
                    </div>
            </div>
        </section>
    </main>

    <div id="audioStreams" class="sr-audio" aria-hidden="true"></div>

    <aside class="profile-panel" id="profilePanel" aria-hidden="true">
        <div class="profile-card">
            <button class="close-profile" id="closeProfile" type="button" aria-label="Close profile">X</button>
            <div class="profile-avatar" id="profileAvatar">ðŸ‘¤</div>
            <div class="profile-meta">
                <p class="eyebrow">PROFILE</p>
                <h3 id="profileName">Select a member</h3>
                <p class="hint" id="profileTime">Total VC: 0s</p>
                <p class="hint" id="profileDiscord">Discord: Not linked</p>
            </div>
        </div>
    </aside>

    <div class="gate" id="gate">
        <div class="gate-card">
            <p class="eyebrow">VERIFY YOUR HANDLE</p>
            <h2>Who&apos;s entering the fire?</h2>
            <div class="identity-stack">
                <input type="text" id="usernameInput" maxlength="16" placeholder="Enter callsign" />
                <p class="hint" id="nameHint">3-16 characters. No slurs, no cowards.</p>
                <button class="discord-connect" id="discordConnect" type="button">
                    <span>Connect Discord</span>
                </button>
            </div>
            <button class="primary" id="enterBtn" disabled>Enter The Trenches</button>
        </div>
    </div>

    <script src="https://unpkg.com/simple-peer@9.11.1/simplepeer.min.js"></script>
    <script src="app.js" type="module"></script>
</body>
</html>
